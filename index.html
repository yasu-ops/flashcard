<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>フラッシュカード学習アプリ</title>
    <link rel="stylesheet" href="flash.css"></head>
</head>
<body>
    <div class="container">
        <!-- 学習記録操作ボタン（メイン画面のみ） -->
        <div id="record-controls" class="record-controls">
            <button id="export-record" class="record-btn">エクスポート</button>
            <button id="import-record" class="record-btn">インポート</button>
            <input type="file" id="import-file" accept=".csv" />
        </div>

        <!-- メイン画面 -->
        <div id="main-screen">
            <h1>🐱分類して暗記🐱</h1>
            <ul>
            <li>やること
                <ul>
                    <li><span class="label-untouched">未分類</span>を<span class="label-not-memorized">むずっ</span>・<span class="label-maa-ok">OKかな！</span>・<span class="label-rakusho">完璧♥</span>に分類。</li>
                    <ul>
                        <li><b>分類を変更するとその問題はあなたの目の前から消える。</b>（他の分類に移動してしまうため。）</li>
                        <li><span class="label-not-memorized">むずっ</span>は少しずつ覚えて<span class="label-maa-ok">OKかな！</span>へ移そう。</li>
                        <li><span class="label-completed">OKかな！</span>は時々見直し、忘れてないか確認。不安なら<span class="label-not-memorized">むずっ</span>に移そう。</li>
                        <li>もう大丈夫と思ったら<span class="label-rakusho">完璧♥</span>へ。
                        <li>リセットを押すとそのコースの全部の問題が「未分類」に戻る。</li>    
                    </ul>
                </ul>
            <li>表示方式
                <ul><li>カード型；１問ずつ表示</li>
                    <li>一覧型：全問を一覧表示</li></ul>
            <li>保存
             <ul><li>分類結果は端末に自動保存。（まれに消える）</li>
                 <li>「確実に保存」・「続きを他の端末で」→エクスポートで書き出し、インポートで読み込む。</li>
                </ul>   
            </ul>
            <div id="sets-container">
                <div class="loading">問題・正解セットの一覧.csvを読み込んでいます...</div>
            </div>
        </div>

        <!-- 学習画面 -->
        <div id="study-screen" class="study-screen">
            <button id="back-to-main" class="back-btn">メニューに戻る</button>
            <div class="mode-info">
                <b>『<span id="study-title"></span>』コース</b>
            </div>
            <div class="status" id="study-status">
                <button class="untouched-btn" onclick="filterAndDisplay(0, getViewMode())">未分類: <span id="untouched-count">0</span></button>
                <button class="not-memorized-btn" onclick="filterAndDisplay(1, getViewMode())">むずっ: <span id="not-memorized-count">0</span></button>
                <button class="maa-ok-btn" onclick="filterAndDisplay(2, getViewMode())">OKかな！: <span id="maa-ok-count">0</span></button>
                <button class="rakusho-btn" onclick="filterAndDisplay(3, getViewMode())">完璧♥: <span id="rakusho-count">0</span></button>
                表示方式
                <div class="view-mode-selector">
                    <input type="radio" id="study-card-mode" name="study-view-mode" value="card" checked>
                    <label for="study-card-mode">カード型</label>
                    <input type="radio" id="study-list-mode" name="study-view-mode" value="list">
                    <label for="study-list-mode">一覧型</label>
                </div>
            </div>
            
            <div class="question-card">
                <div class="question-text" id="current-question"  style="display: block;"></div>
                <div class="question-text" id="question-text"  style="display: block;"></div>
                <div class="answer-text" id="answer-text" style="display: none;"></div>
                <div class="explanation-text" id="explanation-text" style="display: none;"></div>
            </div>
            
            <div class="navigation">
                <button id="prev-question" class="secondary-btn">前へ</button>
                
                <div class="radio-group">
                    
                        <div class="radio-item">
                            <input type="radio" id="untouched-radio" name="status" value="0">
                            <label for="untouched-radio"><span class="label-untouched">未分類</span></label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="not-memorized-radio" name="status" value="1">
                            <label for="not-memorized-radio"><span class="label-not-memorized">むずっ</span></label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="maa-ok-radio" name="status" value="2">
                            <label for="maa-ok-radio"><span class="label-maa-ok">OKかな！</span></label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="rakusho-radio" name="status" value="3">
                            <label for="rakusho-radio"><span class="label-rakusho">完璧♥</span></label>
                        </div>
                </div>
                <button id="next-question" class="secondary-btn">次へ</button>
            </div>
            
            <div style="text-align: center;">
                <button id="toggle-answer" class="success-btn">正解を見てから分類</button>
                <button id="toggle-explanation" class="warning-btn" style="display: none;">解説を表示</button>
            </div>
        </div>

        <!-- 一覧画面 -->
        <div id="list-screen" class="list-screen">
            <button id="back-to-main-from-list" class="back-btn">メニューに戻る</button>
            <!--<div class="mode-info" id="list-title"></div>-->
            <b>『<span id="list-title"></span>』コース</b>
            <div class="status" id="list-status">
                <button class="untouched-btn" onclick="filterAndDisplay(0, 'list')">未分類: <span id="list-untouched-count">0</span></button>
                <button class="not-memorized-btn" onclick="filterAndDisplay(1, 'list')">むずっ: <span id="list-not-memorized-count">0</span></button>
                <button class="maa-ok-btn" onclick="filterAndDisplay(2, 'list')">OKかな！: <span id="list-maa-ok-count">0</span></button>
                <button class="rakusho-btn" onclick="filterAndDisplay(3, 'list')">完璧♥: <span id="list-rakusho-count">0</span></button>
                表示方式
                <div class="view-mode-selector">
                    <input type="radio" id="list-card-mode" name="list-view-mode" value="card">
                    <label for="list-card-mode">カード型</label>
                    <input type="radio" id="list-list-mode" name="list-view-mode" value="list" checked>
                    <label for="list-list-mode">一覧型</label>
                </div>
            </div>
            <div id="questions-list"></div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <script src="flash.js"></script>
</body>
</html>